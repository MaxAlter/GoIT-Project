{"version":3,"sources":["webpack:///./tamplates/image-tamplate.hbs","webpack:///./tamplates/lightbox-tamplate.hbs","webpack:///./components/FindImages/find-images.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","largeImageURL","call","webformatURL","stack1","lambda","dataset","bigphoto","refs","searchForm","document","querySelector","searchOutput","actions","currentSearchQuery","newRequest","searchQuery","this","innerHTML","infiniteScrollInstance","pageIndex","loadNextPage","openModalWindow","currentImg","basicLightbox","lightBoxTamplate","show","infiniteScroll","path","responseType","history","status","scrollThreshold","on","response","JSON","parse","hits","length","window","scrollBy","PNotify","error","text","delay","itemsHTML","map","item","imageTamplate","join","proxyElem","createElement","items","querySelectorAll","appendItems","addEventListener","debounce","e","target","value"],"mappings":"gFAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAkCC,EAAOX,EAAUY,iBAExJ,MAAO,6FACHD,EAHuH,mBAG9GN,EAAiG,OAAvFA,EAASH,EAAQW,gBAA4B,MAAVZ,EAAiBA,EAAOY,cAAgBZ,IAAmBI,EAASG,GAAoCH,EAAOS,KAAKR,EAAO,CAAC,KAAO,gBAAgB,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACvS,2DACAM,EALuH,mBAK9GN,EAA+F,OAArFA,EAASH,EAAQa,eAA2B,MAAVd,EAAiBA,EAAOc,aAAed,IAAmBI,EAASG,GAAoCH,EAAOS,KAAKR,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,KAAK,IAAM,CAAC,KAAO,EAAE,OAAS,QAAUC,GACtS,qDACJ,SAAU,K,mECVZ,IAAIT,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,IAAIY,EAEN,MAAO,kDACHhB,EAAUY,iBAAiBZ,EAAUiB,OAAiE,OAAxDD,EAAoB,MAAVf,EAAiBA,EAAOiB,QAAUjB,GAAmBe,EAAOG,SAAWH,EAASf,IACxI,iDACJ,SAAU,K,kMCCZ,MAAMmB,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,aAAcF,SAASC,cAAc,gBAGjCE,EAAU,CACdC,mBAAoB,GACpBC,WAAWC,GACJA,GACDC,KAAKH,qBAAuBE,IAC9BC,KAAKH,mBAAqBE,EAC1BR,EAAKI,aAAaM,UAAY,GAC9BC,EAAuBC,UAAY,EACnCD,EAAuBE,iBAG3BC,gBAAgBC,GACQC,SAAqBC,IAAiBF,IAC9CG,SAIZP,EAAyB,IAAIQ,IAAenB,EAAKI,aAAc,CACnEgB,OACE,MAAQ,iJAAgJf,EAAQC,wDAAwDG,KAAKG,aAE/NS,aAAc,OACdC,SAAS,EACTC,OAAQ,iBACRC,gBAAiB,IAGnBb,EAAuBc,GAAG,OAAQC,IAChC,MAAM1C,EAAO2C,KAAKC,MAAMF,GACxB,GAAI1C,EAAK6C,KAAKC,OAAS,EAErB,OADAC,OAAOC,SAAS,GAAI,IACbC,IAAQC,MAAM,CACnBC,KAAM,oCACNC,MAAO,MAGX,MAAMC,EAAYrD,EAAK6C,KAAKS,IAAIC,GAAQC,IAAcD,IAAOE,KAAK,IAC5DC,EAAYxC,SAASyC,cAAc,OACzCD,EAAUhC,UAAY2B,EACtB,MAAMO,EAAQF,EAAUG,iBAAiB,kBACzClC,EAAuBmC,YAAYF,KAGrC5C,EAAKC,WAAW8C,iBACd,QACAC,mBAASC,GAAK5C,EAAQE,WAAW0C,EAAEC,OAAOC,OAAQ,MAEpDnD,EAAKI,aAAa2C,iBAAiB,QAASE,IAC1C,GAAIA,EAAEC,OAAOpD,QAAQC,SAAU,OAAOM,EAAQS,gBAAgBmC,EAAEC,UAIlEhD,SAAS6C,iBAAiB,mBAAoB,IACrCpC,EAAuBE,iB","file":"main.c56c97acfd5dfaee56d3.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery__item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img data-bigPhoto=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":28},\"end\":{\"line\":3,\"column\":45}}}) : helper)))\n    + \"\\\" class=\\\"photo-card__img\\\" width=\\\"400\\\" height=\\\"250\\\" src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":101},\"end\":{\"line\":3,\"column\":117}}}) : helper)))\n    + \"\\\"\\r\\n            alt=\\\"\\\" />\\r\\n    </div>\\r\\n</li>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"full-size-image\\\">\\r\\n    <img src=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? depth0.dataset : depth0)) != null ? stack1.bigphoto : stack1), depth0))\n    + \"\\\" alt=\\\"\\\" width=\\\"1000\\\" height=\\\"700\\\">\\r\\n</div>\";\n},\"useData\":true});","'use strict';\r\n\r\nimport infiniteScroll from 'infinite-scroll/';\r\nimport imageTamplate from '../../tamplates/image-tamplate.hbs';\r\nimport lightBoxTamplate from '../../tamplates/lightbox-tamplate.hbs';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport PNotify from 'pnotify/dist/es/PNotify.js';\r\nimport { debounce } from 'debounce';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  searchOutput: document.querySelector('.js-gallery'),\r\n};\r\n\r\nconst actions = {\r\n  currentSearchQuery: '',\r\n  newRequest(searchQuery) {\r\n    if (!searchQuery) return;\r\n    if (this.currentSearchQuery !== searchQuery) {\r\n      this.currentSearchQuery = searchQuery;\r\n      refs.searchOutput.innerHTML = '';\r\n      infiniteScrollInstance.pageIndex = 1;\r\n      infiniteScrollInstance.loadNextPage();\r\n    }\r\n  },\r\n  openModalWindow(currentImg) {\r\n    const imageInstance = basicLightbox.create(lightBoxTamplate(currentImg));\r\n    imageInstance.show();\r\n  },\r\n};\r\n\r\nconst infiniteScrollInstance = new infiniteScroll(refs.searchOutput, {\r\n  path() {\r\n    return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&key=15346262-2d23a576c3ba87714cfd3e6d1&q=${actions.currentSearchQuery}&image_type=photo&per_page=20&page=${this.pageIndex}`;\r\n  },\r\n  responseType: 'text',\r\n  history: false,\r\n  status: '.loader-ellips',\r\n  scrollThreshold: 0,\r\n});\r\n\r\ninfiniteScrollInstance.on('load', response => {\r\n  const data = JSON.parse(response);\r\n  if (data.hits.length < 1) {\r\n    window.scrollBy(0, -40);\r\n    return PNotify.error({\r\n      text: 'Sorry, we could not find anything',\r\n      delay: 2000,\r\n    });\r\n  }\r\n  const itemsHTML = data.hits.map(item => imageTamplate(item)).join('');\r\n  const proxyElem = document.createElement('div');\r\n  proxyElem.innerHTML = itemsHTML;\r\n  const items = proxyElem.querySelectorAll('.gallery__item');\r\n  infiniteScrollInstance.appendItems(items);\r\n});\r\n\r\nrefs.searchForm.addEventListener(\r\n  'input',\r\n  debounce(e => actions.newRequest(e.target.value), 500),\r\n);\r\nrefs.searchOutput.addEventListener('click', e => {\r\n  if (e.target.dataset.bigphoto) return actions.openModalWindow(e.target);\r\n  return;\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  return infiniteScrollInstance.loadNextPage();\r\n});\r\n"],"sourceRoot":""}